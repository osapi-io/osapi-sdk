<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# osapi

```go
import "github.com/osapi-io/osapi-sdk/pkg/osapi"
```

Package osapi provides a Go SDK for the OSAPI REST API.

Create a client with New\(\) and use the domain\-specific services to interact with the API:

```
client, err := osapi.New("http://localhost:8080", "your-jwt-token")
if err != nil {
    log.Fatal(err)
}

// Get hostname
resp, err := client.Node.Hostname(ctx, "_any")

// Execute a command
resp, err := client.Node.Exec(ctx, osapi.ExecRequest{
    Command: "uptime",
    Target:  "_all",
})
```

## Index

- [type AgentService](<#AgentService>)
  - [func \(s \*AgentService\) Get\(ctx context.Context, hostname string\) \(\*gen.GetAgentDetailsResponse, error\)](<#AgentService.Get>)
  - [func \(s \*AgentService\) List\(ctx context.Context\) \(\*gen.GetAgentResponse, error\)](<#AgentService.List>)
- [type AuditService](<#AuditService>)
  - [func \(s \*AuditService\) Export\(ctx context.Context\) \(\*gen.GetAuditExportResponse, error\)](<#AuditService.Export>)
  - [func \(s \*AuditService\) Get\(ctx context.Context, id string\) \(\*gen.GetAuditLogByIDResponse, error\)](<#AuditService.Get>)
  - [func \(s \*AuditService\) List\(ctx context.Context, limit int, offset int\) \(\*gen.GetAuditLogsResponse, error\)](<#AuditService.List>)
- [type Client](<#Client>)
  - [func New\(baseURL string, bearerToken string, opts ...Option\) \(\*Client, error\)](<#New>)
- [type ExecRequest](<#ExecRequest>)
- [type HealthService](<#HealthService>)
  - [func \(s \*HealthService\) Liveness\(ctx context.Context\) \(\*gen.GetHealthResponse, error\)](<#HealthService.Liveness>)
  - [func \(s \*HealthService\) Ready\(ctx context.Context\) \(\*gen.GetHealthReadyResponse, error\)](<#HealthService.Ready>)
  - [func \(s \*HealthService\) Status\(ctx context.Context\) \(\*gen.GetHealthStatusResponse, error\)](<#HealthService.Status>)
- [type JobService](<#JobService>)
  - [func \(s \*JobService\) Create\(ctx context.Context, operation map\[string\]interface\{\}, target string\) \(\*gen.PostJobResponse, error\)](<#JobService.Create>)
  - [func \(s \*JobService\) Delete\(ctx context.Context, id string\) \(\*gen.DeleteJobByIDResponse, error\)](<#JobService.Delete>)
  - [func \(s \*JobService\) Get\(ctx context.Context, id string\) \(\*gen.GetJobByIDResponse, error\)](<#JobService.Get>)
  - [func \(s \*JobService\) List\(ctx context.Context, params ListParams\) \(\*gen.GetJobResponse, error\)](<#JobService.List>)
  - [func \(s \*JobService\) QueueStats\(ctx context.Context\) \(\*gen.GetJobStatusResponse, error\)](<#JobService.QueueStats>)
  - [func \(s \*JobService\) Retry\(ctx context.Context, id string, target string\) \(\*gen.RetryJobByIDResponse, error\)](<#JobService.Retry>)
- [type ListParams](<#ListParams>)
- [type MetricsService](<#MetricsService>)
  - [func \(s \*MetricsService\) Get\(ctx context.Context\) \(string, error\)](<#MetricsService.Get>)
- [type NodeService](<#NodeService>)
  - [func \(s \*NodeService\) Disk\(ctx context.Context, target string\) \(\*gen.GetNodeDiskResponse, error\)](<#NodeService.Disk>)
  - [func \(s \*NodeService\) Exec\(ctx context.Context, req ExecRequest\) \(\*gen.PostNodeCommandExecResponse, error\)](<#NodeService.Exec>)
  - [func \(s \*NodeService\) GetDNS\(ctx context.Context, target string, interfaceName string\) \(\*gen.GetNodeNetworkDNSByInterfaceResponse, error\)](<#NodeService.GetDNS>)
  - [func \(s \*NodeService\) Hostname\(ctx context.Context, target string\) \(\*gen.GetNodeHostnameResponse, error\)](<#NodeService.Hostname>)
  - [func \(s \*NodeService\) Load\(ctx context.Context, target string\) \(\*gen.GetNodeLoadResponse, error\)](<#NodeService.Load>)
  - [func \(s \*NodeService\) Memory\(ctx context.Context, target string\) \(\*gen.GetNodeMemoryResponse, error\)](<#NodeService.Memory>)
  - [func \(s \*NodeService\) OS\(ctx context.Context, target string\) \(\*gen.GetNodeOSResponse, error\)](<#NodeService.OS>)
  - [func \(s \*NodeService\) Ping\(ctx context.Context, target string, address string\) \(\*gen.PostNodeNetworkPingResponse, error\)](<#NodeService.Ping>)
  - [func \(s \*NodeService\) Shell\(ctx context.Context, req ShellRequest\) \(\*gen.PostNodeCommandShellResponse, error\)](<#NodeService.Shell>)
  - [func \(s \*NodeService\) Status\(ctx context.Context, target string\) \(\*gen.GetNodeStatusResponse, error\)](<#NodeService.Status>)
  - [func \(s \*NodeService\) UpdateDNS\(ctx context.Context, target string, interfaceName string, servers \[\]string, searchDomains \[\]string\) \(\*gen.PutNodeNetworkDNSResponse, error\)](<#NodeService.UpdateDNS>)
  - [func \(s \*NodeService\) Uptime\(ctx context.Context, target string\) \(\*gen.GetNodeUptimeResponse, error\)](<#NodeService.Uptime>)
- [type Option](<#Option>)
  - [func WithHTTPTransport\(transport http.RoundTripper\) Option](<#WithHTTPTransport>)
  - [func WithLogger\(logger \*slog.Logger\) Option](<#WithLogger>)
- [type ShellRequest](<#ShellRequest>)


<a name="AgentService"></a>
## type AgentService

AgentService provides agent discovery and details operations.

```go
type AgentService struct {
    // contains filtered or unexported fields
}
```

<a name="AgentService.Get"></a>
### func \(\*AgentService\) Get

```go
func (s *AgentService) Get(ctx context.Context, hostname string) (*gen.GetAgentDetailsResponse, error)
```

Get retrieves detailed information about a specific agent by hostname.

<a name="AgentService.List"></a>
### func \(\*AgentService\) List

```go
func (s *AgentService) List(ctx context.Context) (*gen.GetAgentResponse, error)
```

List retrieves all active agents.

<a name="AuditService"></a>
## type AuditService

AuditService provides audit log operations.

```go
type AuditService struct {
    // contains filtered or unexported fields
}
```

<a name="AuditService.Export"></a>
### func \(\*AuditService\) Export

```go
func (s *AuditService) Export(ctx context.Context) (*gen.GetAuditExportResponse, error)
```

Export retrieves all audit log entries for export.

<a name="AuditService.Get"></a>
### func \(\*AuditService\) Get

```go
func (s *AuditService) Get(ctx context.Context, id string) (*gen.GetAuditLogByIDResponse, error)
```

Get retrieves a single audit log entry by ID.

<a name="AuditService.List"></a>
### func \(\*AuditService\) List

```go
func (s *AuditService) List(ctx context.Context, limit int, offset int) (*gen.GetAuditLogsResponse, error)
```

List retrieves audit log entries with pagination.

<a name="Client"></a>
## type Client

Client is the top\-level OSAPI SDK client. Use New\(\) to create one.

```go
type Client struct {
    // Agent provides agent discovery and details operations.
    Agent *AgentService

    // Node provides node management operations (hostname, status, disk,
    // memory, load, OS, uptime, network DNS/ping, command exec/shell).
    Node *NodeService

    // Job provides job queue operations (create, get, list, delete, retry).
    Job *JobService

    // Health provides health check operations (liveness, readiness, status).
    Health *HealthService

    // Audit provides audit log operations (list, get, export).
    Audit *AuditService

    // Metrics provides Prometheus metrics access.
    Metrics *MetricsService
    // contains filtered or unexported fields
}
```

<a name="New"></a>
### func New

```go
func New(baseURL string, bearerToken string, opts ...Option) (*Client, error)
```

New creates an OSAPI SDK client.

<a name="ExecRequest"></a>
## type ExecRequest

ExecRequest contains parameters for direct command execution.

```go
type ExecRequest struct {
    // Command is the binary to execute (required).
    Command string

    // Args is the argument list passed to the command.
    Args []string

    // Cwd is the working directory. Empty uses the agent default.
    Cwd string

    // Timeout in seconds. Zero uses the server default (30s).
    Timeout int

    // Target specifies the host: "_any", "_all", hostname, or
    // label ("group:web").
    Target string
}
```

<a name="HealthService"></a>
## type HealthService

HealthService provides health check operations.

```go
type HealthService struct {
    // contains filtered or unexported fields
}
```

<a name="HealthService.Liveness"></a>
### func \(\*HealthService\) Liveness

```go
func (s *HealthService) Liveness(ctx context.Context) (*gen.GetHealthResponse, error)
```

Liveness checks if the API server process is alive.

<a name="HealthService.Ready"></a>
### func \(\*HealthService\) Ready

```go
func (s *HealthService) Ready(ctx context.Context) (*gen.GetHealthReadyResponse, error)
```

Ready checks if the API server and its dependencies are ready to serve traffic.

<a name="HealthService.Status"></a>
### func \(\*HealthService\) Status

```go
func (s *HealthService) Status(ctx context.Context) (*gen.GetHealthStatusResponse, error)
```

Status returns detailed system status including component health, NATS info, stream stats, and job queue counts. Requires authentication.

<a name="JobService"></a>
## type JobService

JobService provides job queue operations.

```go
type JobService struct {
    // contains filtered or unexported fields
}
```

<a name="JobService.Create"></a>
### func \(\*JobService\) Create

```go
func (s *JobService) Create(ctx context.Context, operation map[string]interface{}, target string) (*gen.PostJobResponse, error)
```

Create creates a new job with the given operation and target.

<a name="JobService.Delete"></a>
### func \(\*JobService\) Delete

```go
func (s *JobService) Delete(ctx context.Context, id string) (*gen.DeleteJobByIDResponse, error)
```

Delete deletes a job by ID.

<a name="JobService.Get"></a>
### func \(\*JobService\) Get

```go
func (s *JobService) Get(ctx context.Context, id string) (*gen.GetJobByIDResponse, error)
```

Get retrieves a job by ID.

<a name="JobService.List"></a>
### func \(\*JobService\) List

```go
func (s *JobService) List(ctx context.Context, params ListParams) (*gen.GetJobResponse, error)
```

List retrieves jobs, optionally filtered by status.

<a name="JobService.QueueStats"></a>
### func \(\*JobService\) QueueStats

```go
func (s *JobService) QueueStats(ctx context.Context) (*gen.GetJobStatusResponse, error)
```

QueueStats retrieves job queue statistics.

<a name="JobService.Retry"></a>
### func \(\*JobService\) Retry

```go
func (s *JobService) Retry(ctx context.Context, id string, target string) (*gen.RetryJobByIDResponse, error)
```

Retry retries a failed job by ID, optionally on a different target.

<a name="ListParams"></a>
## type ListParams

ListParams contains optional filters for listing jobs.

```go
type ListParams struct {
    // Status filters by job status (e.g., "pending", "completed").
    Status string

    // Limit is the maximum number of results. Zero uses server default.
    Limit int

    // Offset is the number of results to skip. Zero starts from the
    // beginning.
    Offset int
}
```

<a name="MetricsService"></a>
## type MetricsService

MetricsService provides Prometheus metrics access.

```go
type MetricsService struct {
    // contains filtered or unexported fields
}
```

<a name="MetricsService.Get"></a>
### func \(\*MetricsService\) Get

```go
func (s *MetricsService) Get(ctx context.Context) (string, error)
```

Get fetches the raw Prometheus metrics text from the /metrics endpoint.

<a name="NodeService"></a>
## type NodeService

NodeService provides node management operations.

```go
type NodeService struct {
    // contains filtered or unexported fields
}
```

<a name="NodeService.Disk"></a>
### func \(\*NodeService\) Disk

```go
func (s *NodeService) Disk(ctx context.Context, target string) (*gen.GetNodeDiskResponse, error)
```

Disk retrieves disk usage information from the target host.

<a name="NodeService.Exec"></a>
### func \(\*NodeService\) Exec

```go
func (s *NodeService) Exec(ctx context.Context, req ExecRequest) (*gen.PostNodeCommandExecResponse, error)
```

Exec executes a command directly without a shell interpreter.

<a name="NodeService.GetDNS"></a>
### func \(\*NodeService\) GetDNS

```go
func (s *NodeService) GetDNS(ctx context.Context, target string, interfaceName string) (*gen.GetNodeNetworkDNSByInterfaceResponse, error)
```

GetDNS retrieves DNS configuration for a network interface on the target host.

<a name="NodeService.Hostname"></a>
### func \(\*NodeService\) Hostname

```go
func (s *NodeService) Hostname(ctx context.Context, target string) (*gen.GetNodeHostnameResponse, error)
```

Hostname retrieves the hostname from the target host.

<a name="NodeService.Load"></a>
### func \(\*NodeService\) Load

```go
func (s *NodeService) Load(ctx context.Context, target string) (*gen.GetNodeLoadResponse, error)
```

Load retrieves load average information from the target host.

<a name="NodeService.Memory"></a>
### func \(\*NodeService\) Memory

```go
func (s *NodeService) Memory(ctx context.Context, target string) (*gen.GetNodeMemoryResponse, error)
```

Memory retrieves memory usage information from the target host.

<a name="NodeService.OS"></a>
### func \(\*NodeService\) OS

```go
func (s *NodeService) OS(ctx context.Context, target string) (*gen.GetNodeOSResponse, error)
```

OS retrieves operating system information from the target host.

<a name="NodeService.Ping"></a>
### func \(\*NodeService\) Ping

```go
func (s *NodeService) Ping(ctx context.Context, target string, address string) (*gen.PostNodeNetworkPingResponse, error)
```

Ping sends an ICMP ping to the specified address from the target host.

<a name="NodeService.Shell"></a>
### func \(\*NodeService\) Shell

```go
func (s *NodeService) Shell(ctx context.Context, req ShellRequest) (*gen.PostNodeCommandShellResponse, error)
```

Shell executes a command through /bin/sh \-c with shell features \(pipes, redirects, variable expansion\).

<a name="NodeService.Status"></a>
### func \(\*NodeService\) Status

```go
func (s *NodeService) Status(ctx context.Context, target string) (*gen.GetNodeStatusResponse, error)
```

Status retrieves node status \(OS info, disk, memory, load\) from the target host.

<a name="NodeService.UpdateDNS"></a>
### func \(\*NodeService\) UpdateDNS

```go
func (s *NodeService) UpdateDNS(ctx context.Context, target string, interfaceName string, servers []string, searchDomains []string) (*gen.PutNodeNetworkDNSResponse, error)
```

UpdateDNS updates DNS configuration for a network interface on the target host.

<a name="NodeService.Uptime"></a>
### func \(\*NodeService\) Uptime

```go
func (s *NodeService) Uptime(ctx context.Context, target string) (*gen.GetNodeUptimeResponse, error)
```

Uptime retrieves uptime information from the target host.

<a name="Option"></a>
## type Option

Option configures the Client.

```go
type Option func(*Client)
```

<a name="WithHTTPTransport"></a>
### func WithHTTPTransport

```go
func WithHTTPTransport(transport http.RoundTripper) Option
```

WithHTTPTransport sets a custom base HTTP transport.

<a name="WithLogger"></a>
### func WithLogger

```go
func WithLogger(logger *slog.Logger) Option
```

WithLogger sets a custom logger. Defaults to slog.Default\(\).

<a name="ShellRequest"></a>
## type ShellRequest

ShellRequest contains parameters for shell command execution.

```go
type ShellRequest struct {
    // Command is the shell command string passed to /bin/sh -c (required).
    Command string

    // Cwd is the working directory. Empty uses the agent default.
    Cwd string

    // Timeout in seconds. Zero uses the server default (30s).
    Timeout int

    // Target specifies the host: "_any", "_all", hostname, or
    // label ("group:web").
    Target string
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
