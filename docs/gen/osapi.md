<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# osapi

```go
import "github.com/osapi-io/osapi-sdk/pkg/osapi"
```

Package osapi provides a Go SDK for the OSAPI REST API.

Create a client with New\(\) and use the domain\-specific services to interact with the API:

```
client, err := osapi.New("http://localhost:8080", "your-jwt-token")
if err != nil {
    log.Fatal(err)
}

// Get hostname
resp, err := client.System.Hostname(ctx, "_any")

// Execute a command
resp, err := client.Command.Exec(ctx, osapi.ExecRequest{
    Command: "uptime",
    Target:  "_all",
})
```

## Index

- [type AuditService](<#AuditService>)
  - [func \(s \*AuditService\) Export\(ctx context.Context\) \(\*gen.GetAuditExportResponse, error\)](<#AuditService.Export>)
  - [func \(s \*AuditService\) Get\(ctx context.Context, id string\) \(\*gen.GetAuditLogByIDResponse, error\)](<#AuditService.Get>)
  - [func \(s \*AuditService\) List\(ctx context.Context, limit int, offset int\) \(\*gen.GetAuditLogsResponse, error\)](<#AuditService.List>)
- [type Client](<#Client>)
  - [func New\(baseURL string, bearerToken string, opts ...Option\) \(\*Client, error\)](<#New>)
- [type CommandService](<#CommandService>)
  - [func \(s \*CommandService\) Exec\(ctx context.Context, req ExecRequest\) \(\*gen.PostCommandExecResponse, error\)](<#CommandService.Exec>)
  - [func \(s \*CommandService\) Shell\(ctx context.Context, req ShellRequest\) \(\*gen.PostCommandShellResponse, error\)](<#CommandService.Shell>)
- [type ExecRequest](<#ExecRequest>)
- [type HealthService](<#HealthService>)
  - [func \(s \*HealthService\) Liveness\(ctx context.Context\) \(\*gen.GetHealthResponse, error\)](<#HealthService.Liveness>)
  - [func \(s \*HealthService\) Ready\(ctx context.Context\) \(\*gen.GetHealthReadyResponse, error\)](<#HealthService.Ready>)
  - [func \(s \*HealthService\) Status\(ctx context.Context\) \(\*gen.GetHealthStatusResponse, error\)](<#HealthService.Status>)
- [type JobService](<#JobService>)
  - [func \(s \*JobService\) Create\(ctx context.Context, operation map\[string\]interface\{\}, target string\) \(\*gen.PostJobResponse, error\)](<#JobService.Create>)
  - [func \(s \*JobService\) Delete\(ctx context.Context, id string\) \(\*gen.DeleteJobByIDResponse, error\)](<#JobService.Delete>)
  - [func \(s \*JobService\) Get\(ctx context.Context, id string\) \(\*gen.GetJobByIDResponse, error\)](<#JobService.Get>)
  - [func \(s \*JobService\) List\(ctx context.Context, params ListParams\) \(\*gen.GetJobResponse, error\)](<#JobService.List>)
  - [func \(s \*JobService\) QueueStats\(ctx context.Context\) \(\*gen.GetJobStatusResponse, error\)](<#JobService.QueueStats>)
  - [func \(s \*JobService\) Retry\(ctx context.Context, id string, target string\) \(\*gen.RetryJobByIDResponse, error\)](<#JobService.Retry>)
  - [func \(s \*JobService\) Workers\(ctx context.Context\) \(\*gen.GetJobWorkersResponse, error\)](<#JobService.Workers>)
- [type ListParams](<#ListParams>)
- [type MetricsService](<#MetricsService>)
  - [func \(s \*MetricsService\) Get\(ctx context.Context\) \(string, error\)](<#MetricsService.Get>)
- [type NetworkService](<#NetworkService>)
  - [func \(s \*NetworkService\) GetDNS\(ctx context.Context, target string, interfaceName string\) \(\*gen.GetNetworkDNSByInterfaceResponse, error\)](<#NetworkService.GetDNS>)
  - [func \(s \*NetworkService\) Ping\(ctx context.Context, target string, address string\) \(\*gen.PostNetworkPingResponse, error\)](<#NetworkService.Ping>)
  - [func \(s \*NetworkService\) UpdateDNS\(ctx context.Context, target string, interfaceName string, servers \[\]string, searchDomains \[\]string\) \(\*gen.PutNetworkDNSResponse, error\)](<#NetworkService.UpdateDNS>)
- [type Option](<#Option>)
  - [func WithHTTPTransport\(transport http.RoundTripper\) Option](<#WithHTTPTransport>)
  - [func WithLogger\(logger \*slog.Logger\) Option](<#WithLogger>)
- [type ShellRequest](<#ShellRequest>)
- [type SystemService](<#SystemService>)
  - [func \(s \*SystemService\) Hostname\(ctx context.Context, target string\) \(\*gen.GetSystemHostnameResponse, error\)](<#SystemService.Hostname>)
  - [func \(s \*SystemService\) Status\(ctx context.Context, target string\) \(\*gen.GetSystemStatusResponse, error\)](<#SystemService.Status>)


<a name="AuditService"></a>
## type AuditService

AuditService provides audit log operations.

```go
type AuditService struct {
    // contains filtered or unexported fields
}
```

<a name="AuditService.Export"></a>
### func \(\*AuditService\) Export

```go
func (s *AuditService) Export(ctx context.Context) (*gen.GetAuditExportResponse, error)
```

Export retrieves all audit log entries for export.

<a name="AuditService.Get"></a>
### func \(\*AuditService\) Get

```go
func (s *AuditService) Get(ctx context.Context, id string) (*gen.GetAuditLogByIDResponse, error)
```

Get retrieves a single audit log entry by ID.

<a name="AuditService.List"></a>
### func \(\*AuditService\) List

```go
func (s *AuditService) List(ctx context.Context, limit int, offset int) (*gen.GetAuditLogsResponse, error)
```

List retrieves audit log entries with pagination.

<a name="Client"></a>
## type Client

Client is the top\-level OSAPI SDK client. Use New\(\) to create one.

```go
type Client struct {
    // System provides system management operations (hostname, status).
    System *SystemService

    // Network provides network management operations (DNS, ping).
    Network *NetworkService

    // Command provides command execution operations (exec, shell).
    Command *CommandService

    // Job provides job queue operations (create, get, list, delete, retry).
    Job *JobService

    // Health provides health check operations (liveness, readiness, status).
    Health *HealthService

    // Audit provides audit log operations (list, get, export).
    Audit *AuditService

    // Metrics provides Prometheus metrics access.
    Metrics *MetricsService
    // contains filtered or unexported fields
}
```

<a name="New"></a>
### func New

```go
func New(baseURL string, bearerToken string, opts ...Option) (*Client, error)
```

New creates an OSAPI SDK client.

<a name="CommandService"></a>
## type CommandService

CommandService provides command execution operations.

```go
type CommandService struct {
    // contains filtered or unexported fields
}
```

<a name="CommandService.Exec"></a>
### func \(\*CommandService\) Exec

```go
func (s *CommandService) Exec(ctx context.Context, req ExecRequest) (*gen.PostCommandExecResponse, error)
```

Exec executes a command directly without a shell interpreter.

<a name="CommandService.Shell"></a>
### func \(\*CommandService\) Shell

```go
func (s *CommandService) Shell(ctx context.Context, req ShellRequest) (*gen.PostCommandShellResponse, error)
```

Shell executes a command through /bin/sh \-c with shell features \(pipes, redirects, variable expansion\).

<a name="ExecRequest"></a>
## type ExecRequest

ExecRequest contains parameters for direct command execution.

```go
type ExecRequest struct {
    // Command is the binary to execute (required).
    Command string

    // Args is the argument list passed to the command.
    Args []string

    // Cwd is the working directory. Empty uses the worker default.
    Cwd string

    // Timeout in seconds. Zero uses the server default (30s).
    Timeout int

    // Target specifies the host: "_any", "_all", hostname, or
    // label ("group:web").
    Target string
}
```

<a name="HealthService"></a>
## type HealthService

HealthService provides health check operations.

```go
type HealthService struct {
    // contains filtered or unexported fields
}
```

<a name="HealthService.Liveness"></a>
### func \(\*HealthService\) Liveness

```go
func (s *HealthService) Liveness(ctx context.Context) (*gen.GetHealthResponse, error)
```

Liveness checks if the API server process is alive.

<a name="HealthService.Ready"></a>
### func \(\*HealthService\) Ready

```go
func (s *HealthService) Ready(ctx context.Context) (*gen.GetHealthReadyResponse, error)
```

Ready checks if the API server and its dependencies are ready to serve traffic.

<a name="HealthService.Status"></a>
### func \(\*HealthService\) Status

```go
func (s *HealthService) Status(ctx context.Context) (*gen.GetHealthStatusResponse, error)
```

Status returns detailed system status including component health, NATS info, stream stats, and job queue counts. Requires authentication.

<a name="JobService"></a>
## type JobService

JobService provides job queue operations.

```go
type JobService struct {
    // contains filtered or unexported fields
}
```

<a name="JobService.Create"></a>
### func \(\*JobService\) Create

```go
func (s *JobService) Create(ctx context.Context, operation map[string]interface{}, target string) (*gen.PostJobResponse, error)
```

Create creates a new job with the given operation and target.

<a name="JobService.Delete"></a>
### func \(\*JobService\) Delete

```go
func (s *JobService) Delete(ctx context.Context, id string) (*gen.DeleteJobByIDResponse, error)
```

Delete deletes a job by ID.

<a name="JobService.Get"></a>
### func \(\*JobService\) Get

```go
func (s *JobService) Get(ctx context.Context, id string) (*gen.GetJobByIDResponse, error)
```

Get retrieves a job by ID.

<a name="JobService.List"></a>
### func \(\*JobService\) List

```go
func (s *JobService) List(ctx context.Context, params ListParams) (*gen.GetJobResponse, error)
```

List retrieves jobs, optionally filtered by status.

<a name="JobService.QueueStats"></a>
### func \(\*JobService\) QueueStats

```go
func (s *JobService) QueueStats(ctx context.Context) (*gen.GetJobStatusResponse, error)
```

QueueStats retrieves job queue statistics.

<a name="JobService.Retry"></a>
### func \(\*JobService\) Retry

```go
func (s *JobService) Retry(ctx context.Context, id string, target string) (*gen.RetryJobByIDResponse, error)
```

Retry retries a failed job by ID, optionally on a different target.

<a name="JobService.Workers"></a>
### func \(\*JobService\) Workers

```go
func (s *JobService) Workers(ctx context.Context) (*gen.GetJobWorkersResponse, error)
```

Workers retrieves active workers.

<a name="ListParams"></a>
## type ListParams

ListParams contains optional filters for listing jobs.

```go
type ListParams struct {
    // Status filters by job status (e.g., "pending", "completed").
    Status string

    // Limit is the maximum number of results. Zero uses server default.
    Limit int

    // Offset is the number of results to skip. Zero starts from the
    // beginning.
    Offset int
}
```

<a name="MetricsService"></a>
## type MetricsService

MetricsService provides Prometheus metrics access.

```go
type MetricsService struct {
    // contains filtered or unexported fields
}
```

<a name="MetricsService.Get"></a>
### func \(\*MetricsService\) Get

```go
func (s *MetricsService) Get(ctx context.Context) (string, error)
```

Get fetches the raw Prometheus metrics text from the /metrics endpoint.

<a name="NetworkService"></a>
## type NetworkService

NetworkService provides network management operations.

```go
type NetworkService struct {
    // contains filtered or unexported fields
}
```

<a name="NetworkService.GetDNS"></a>
### func \(\*NetworkService\) GetDNS

```go
func (s *NetworkService) GetDNS(ctx context.Context, target string, interfaceName string) (*gen.GetNetworkDNSByInterfaceResponse, error)
```

GetDNS retrieves DNS configuration for a network interface on the target host.

<a name="NetworkService.Ping"></a>
### func \(\*NetworkService\) Ping

```go
func (s *NetworkService) Ping(ctx context.Context, target string, address string) (*gen.PostNetworkPingResponse, error)
```

Ping sends an ICMP ping to the specified address from the target host.

<a name="NetworkService.UpdateDNS"></a>
### func \(\*NetworkService\) UpdateDNS

```go
func (s *NetworkService) UpdateDNS(ctx context.Context, target string, interfaceName string, servers []string, searchDomains []string) (*gen.PutNetworkDNSResponse, error)
```

UpdateDNS updates DNS configuration for a network interface on the target host.

<a name="Option"></a>
## type Option

Option configures the Client.

```go
type Option func(*Client)
```

<a name="WithHTTPTransport"></a>
### func WithHTTPTransport

```go
func WithHTTPTransport(transport http.RoundTripper) Option
```

WithHTTPTransport sets a custom base HTTP transport.

<a name="WithLogger"></a>
### func WithLogger

```go
func WithLogger(logger *slog.Logger) Option
```

WithLogger sets a custom logger. Defaults to slog.Default\(\).

<a name="ShellRequest"></a>
## type ShellRequest

ShellRequest contains parameters for shell command execution.

```go
type ShellRequest struct {
    // Command is the shell command string passed to /bin/sh -c (required).
    Command string

    // Cwd is the working directory. Empty uses the worker default.
    Cwd string

    // Timeout in seconds. Zero uses the server default (30s).
    Timeout int

    // Target specifies the host: "_any", "_all", hostname, or
    // label ("group:web").
    Target string
}
```

<a name="SystemService"></a>
## type SystemService

SystemService provides system management operations.

```go
type SystemService struct {
    // contains filtered or unexported fields
}
```

<a name="SystemService.Hostname"></a>
### func \(\*SystemService\) Hostname

```go
func (s *SystemService) Hostname(ctx context.Context, target string) (*gen.GetSystemHostnameResponse, error)
```

Hostname retrieves the hostname from the target host.

<a name="SystemService.Status"></a>
### func \(\*SystemService\) Status

```go
func (s *SystemService) Status(ctx context.Context, target string) (*gen.GetSystemStatusResponse, error)
```

Status retrieves system status \(OS info, disk, memory, load\) from the target host.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
